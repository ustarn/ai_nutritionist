# ğŸ¥— AI è¥å…»å¸ˆ - æ™ºèƒ½é¥®é£Ÿå¥åº·ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº AI çš„ä¸ªæ€§åŒ–è¥å…»å¥åº·ç®¡ç†åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·è¿½è¸ªé¥®é£Ÿã€åˆ†æè¥å…»æ‘„å…¥ã€è·å¾— AI å¥åº·å»ºè®®å’Œæ™ºèƒ½é£Ÿè°±æ¨èã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ“‹ å¥åº·æ¡£æ¡ˆç®¡ç†

- è®°å½•èº«é«˜ã€ä½“é‡ã€å¹´é¾„ã€æ€§åˆ«ç­‰åŸºæœ¬ä¿¡æ¯
- è®¾ç½®å¥åº·ç›®æ ‡ï¼ˆå‡è„‚ã€å¢è‚Œã€ç»´æŒï¼‰
- é…ç½®è¿åŠ¨é‡ç­‰çº§ï¼Œè‡ªåŠ¨è®¡ç®—æ¯æ—¥çƒ­é‡éœ€æ±‚ï¼ˆTDEEï¼‰
- æ™ºèƒ½ç”Ÿæˆä¸ªæ€§åŒ–è¥å…»æ‘„å…¥ç›®æ ‡

### ğŸ½ï¸ é¥®é£Ÿè®°å½•ä¸è¿½è¸ª

- å¿«é€Ÿè®°å½•æ¯é¤é£Ÿç‰©å’Œåˆ†é‡
- è‡ªåŠ¨è®¡ç®—è¥å…»æˆåˆ†ï¼ˆçƒ­é‡ã€è›‹ç™½è´¨ã€ç¢³æ°´ã€è„‚è‚ªã€çº¤ç»´ï¼‰
- æŸ¥çœ‹æ¯æ—¥è¥å…»æ‘„å…¥æ±‡æ€»
- å¯¹æ¯”ä¸ªäººè¥å…»ç›®æ ‡ï¼Œå®æ—¶åé¦ˆè¿›åº¦

### ğŸ“Š é£Ÿç‰©åº“ä¸æœç´¢

- é¢„ç½® 83 ç§å¸¸è§é£Ÿç‰©ï¼Œæ¶µç›– 10 å¤§ç±»åˆ«
  - ä¸»é£Ÿã€è”¬èœã€æ°´æœã€è‚‰ç±»ã€æµ·é²œã€è›‹å¥¶ã€è±†ç±»ã€åšæœã€é¥®å“ã€å…¶ä»–
- å¿«é€Ÿæœç´¢å’Œæ ‡ç­¾è¿‡æ»¤
- æ¯ç§é£Ÿç‰©åŒ…å«è¯¦ç»†çš„è¥å…»æ•°æ®ï¼ˆæ¯ 100gï¼‰

### ğŸ¤– AI æ™ºèƒ½åŠŸèƒ½

- **AI å¥åº·è¯„ä¼°**ï¼šæ ¹æ®ä»Šæ—¥é¥®é£Ÿå’Œå¥åº·ç›®æ ‡ï¼ŒAI æ™ºèƒ½åˆ†æè¥å…»å¹³è¡¡ã€æä¾›ä¸ªæ€§åŒ–å»ºè®®
- **AI è¥å…»è®¡ç®—**ï¼šæè¿°ä¸€é“èœæˆ–ä¸€é¡¿é¥­ï¼ŒAI è‡ªåŠ¨è¯†åˆ«é£Ÿç‰©å¹¶è®¡ç®—è¥å…»æˆåˆ†
- **AI é£Ÿè°±æ¨è**ï¼šæ ¹æ®ç”¨æˆ·ç›®æ ‡å’Œå£å‘³åå¥½ï¼Œæ™ºèƒ½æ¨èå¥åº·é£Ÿè°±

### ğŸ“ˆ ä½“é‡ç®¡ç†

- æ¯æ—¥ä½“é‡è®°å½•å’Œå†å²è¿½è¸ª
- å¯è§†åŒ–ä½“é‡å˜åŒ–è¶‹åŠ¿ï¼ˆæŠ˜çº¿å›¾ï¼‰
- æŸ¥çœ‹å‡è„‚/å¢è‚Œè¿›åº¦

### ğŸ”¥ è¿ç»­æ‰“å¡

- è®°å½•è¿ç»­é£Ÿç‰©è®°å½•å¤©æ•°
- æ¿€åŠ±ç”¨æˆ·å…»æˆå¥åº·ä¹ æƒ¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16
- MongoDB (æœ¬åœ°æˆ–è¿œç¨‹)
- npm æˆ– yarn

### å®‰è£…ä¸è¿è¡Œ

#### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd ai-nutritionist_version1
```

#### 2ï¸âƒ£ é…ç½®åç«¯

```bash
cd backend

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»º .env æ–‡ä»¶
echo "MONGODB_URI=mongodb://localhost:27017/nutrition_db
JWT_SECRET=your_jwt_secret_key_here
API_KEY=your_ai_api_key_here
AI_API_BASE_URL=https://api.example.com/v1" > .env

# å¯åŠ¨åç«¯æœåŠ¡
npm start
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:3000` è¿è¡Œ

#### 3ï¸âƒ£ é…ç½®å‰ç«¯

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡
npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:5173` è¿è¡Œ

### âœ… åˆå§‹åŒ–æ•°æ®

å¯åŠ¨åç«¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆå§‹åŒ–é£Ÿç‰©åº“æ•°æ®ï¼ˆ83 æ¡é£Ÿç‰©è®°å½•ï¼‰ã€‚å¦‚éœ€é‡ç½®ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
INIT_FOODS_FORCE_CLEAR=true
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-nutritionist_version1/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ User.js            # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ HealthProfile.js   # å¥åº·æ¡£æ¡ˆæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Food.js            # é£Ÿç‰©åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ FoodLog.js         # é¥®é£Ÿè®°å½•æ¨¡å‹
â”‚   â”‚   â””â”€â”€ WeightLog.js       # ä½“é‡è®°å½•æ¨¡å‹
â”‚   â”œâ”€â”€ server.js              # Expressä¸»æœåŠ¡å™¨
â”‚   â”œâ”€â”€ initFoods.js           # é£Ÿç‰©åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ .env                   # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ frontend/                  # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx      # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx  # ä¸»ä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.jsx    # å¥åº·æ¡£æ¡ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ FoodLog.jsx    # é¥®é£Ÿè®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ FoodLibrary.jsx# é£Ÿç‰©åº“
â”‚   â”‚   â”‚   â””â”€â”€ Recommend.jsx  # AIæ¨è
â”‚   â”‚   â”œâ”€â”€ components/        # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ Navbar.jsx     # å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ api.js         # APIè°ƒç”¨å°è£…
â”‚   â”‚   â”œâ”€â”€ App.jsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ index.css          # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ README.md                  # æœ¬æ–‡ä»¶
```

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯

- **React 18** - UI æ¡†æ¶
- **Vite** - æ„å»ºå·¥å…·
- **Tailwind CSS** - æ ·å¼æ–¹æ¡ˆ
- **ESLint** - ä»£ç æ£€æŸ¥

### åç«¯

- **Node.js + Express** - æœåŠ¡å™¨æ¡†æ¶
- **MongoDB** - æ•°æ®åº“
- **Mongoose** - ODM åº“
- **JWT** - èº«ä»½è®¤è¯
- **bcryptjs** - å¯†ç åŠ å¯†
- **CORS** - è·¨åŸŸèµ„æºå…±äº«

### AI é›†æˆ

- æ”¯æŒæ¥å…¥ç¬¬ä¸‰æ–¹ AI APIï¼ˆå¦‚ OpenAIã€æ–‡å¿ƒä¸€è¨€ç­‰ï¼‰
- ç”¨äºè¥å…»è®¡ç®—ã€å¥åº·è¯„ä¼°ã€é£Ÿè°±æ¨è

## ğŸ“¡ ä¸»è¦ API ç«¯ç‚¹

### è®¤è¯ç›¸å…³

- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•

### å¥åº·æ¡£æ¡ˆ

- `GET /api/health-profile` - è·å–å¥åº·æ¡£æ¡ˆ
- `PUT /api/health-profile` - æ›´æ–°å¥åº·æ¡£æ¡ˆ

### é¥®é£Ÿè®°å½•

- `POST /api/food-logs` - åˆ›å»ºé¥®é£Ÿè®°å½•
- `GET /api/food-logs/today` - è·å–ä»Šæ—¥é¥®é£Ÿ
- `GET /api/food-logs` - è·å–å†å²é¥®é£Ÿ
- `DELETE /api/food-logs/:id` - åˆ é™¤é¥®é£Ÿè®°å½•

### è¥å…»åˆ†æ

- `GET /api/nutrition/today` - ä»Šæ—¥è¥å…»æ±‡æ€»
- `GET /api/health/assessment` - AI å¥åº·è¯„ä¼°

### é£Ÿç‰©åº“

- `GET /api/foods/search` - æœç´¢é£Ÿç‰©
- `GET /api/foods/categories` - è·å–åˆ†ç±»
- `POST /api/foods` - æ·»åŠ é£Ÿç‰©

### AI åŠŸèƒ½

- `POST /api/ai/calculate-nutrition` - AI è¥å…»è®¡ç®—
- `POST /api/ai/meal-recommendation` - AI é£Ÿè°±æ¨è

### å…¶ä»–

- `GET /api/weight-logs` - è·å–ä½“é‡è®°å½•
- `POST /api/weight-logs` - è®°å½•ä½“é‡
- `GET /api/streak` - è·å–è¿ç»­æ‰“å¡å¤©æ•°

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

### åç«¯ (.env)

```env
# MongoDBè¿æ¥
MONGODB_URI=mongodb://localhost:27017/nutrition_db

# JWTå¯†é’¥ï¼ˆç”¨äºèº«ä»½è®¤è¯ï¼‰
JWT_SECRET=your_jwt_secret_key_here

# AI APIé…ç½®
API_KEY=your_ai_api_key_here
AI_API_BASE_URL=https://api.example.com/v1

# æœåŠ¡å™¨ç«¯å£
PORT=3000

# é£Ÿç‰©åº“åˆå§‹åŒ–
INIT_FOODS_FORCE_CLEAR=false
```

## ğŸ‘¤ ç”¨æˆ·æµç¨‹

```
ç”¨æˆ·ç™»å½•
    â†“
å®Œæˆå¥åº·æ¡£æ¡ˆï¼ˆå¼ºåˆ¶ï¼‰
    â†“
ä¸»ä»ªè¡¨æ¿ï¼ˆæŸ¥çœ‹ä»Šæ—¥æ•°æ®ï¼‰
    â”œâ†’ ğŸ½ï¸ è®°å½•é¥®é£Ÿ
    â”œâ†’ ğŸ“‹ æŸ¥çœ‹/ç¼–è¾‘æ¡£æ¡ˆ
    â”œâ†’ ğŸ“ˆ æŸ¥çœ‹ä½“é‡è¶‹åŠ¿
    â””â†’ ğŸ¤– è·å–AIè¯„ä¼°ä¸å»ºè®®
        â”œâ†’ AIå¥åº·è¯„ä¼°
        â”œâ†’ AIè¥å…»è®¡ç®—
        â””â†’ AIé£Ÿè°±æ¨è
```

## ğŸ“Š æ•°æ®æ¨¡å‹

### ç”¨æˆ· (User)

```javascript
{
  username: String,      // ç”¨æˆ·å
  password: String,      // åŠ å¯†å¯†ç 
  createdAt: Date        // åˆ›å»ºæ—¶é—´
}
```

### å¥åº·æ¡£æ¡ˆ (HealthProfile)

```javascript
{
  userId: ObjectId,      // ç”¨æˆ·ID
  height: Number,        // èº«é«˜(cm)
  weight: Number,        // ä½“é‡(kg)
  targetWeight: Number,  // ç›®æ ‡ä½“é‡
  gender: String,        // æ€§åˆ«
  age: Number,          // å¹´é¾„
  activityLevel: String, // è¿åŠ¨é‡
  goal: String,         // å¥åº·ç›®æ ‡
  targetCalories: Number // ç›®æ ‡çƒ­é‡
}
```

### é£Ÿç‰© (Food)

```javascript
{
  name: String,         // é£Ÿç‰©åç§°
  category: String,     // åˆ†ç±»
  calories: Number,     // çƒ­é‡(kcal/100g)
  protein: Number,      // è›‹ç™½è´¨(g/100g)
  fat: Number,         // è„‚è‚ª(g/100g)
  carbs: Number,       // ç¢³æ°´(g/100g)
  fiber: Number        // çº¤ç»´(g/100g)
}
```

### é¥®é£Ÿè®°å½• (FoodLog)

```javascript
{
  userId: ObjectId,
  foodId: ObjectId,
  quantity: Number,     // é£Ÿç”¨é‡(g)
  logDate: Date,
  mealType: String     // æ—©é¤/åˆé¤/æ™šé¤/é›¶é£Ÿ
}
```

### ä½“é‡è®°å½• (WeightLog)

```javascript
{
  userId: ObjectId,
  weight: Number,       // ä½“é‡(kg)
  logDate: Date
}
```

## ğŸ” å®‰å…¨ç‰¹æ€§

- âœ… JWT èº«ä»½è®¤è¯
- âœ… bcryptjs å¯†ç åŠ å¯†
- âœ… ç”¨æˆ·éš”ç¦»ï¼ˆæ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®ï¼‰
- âœ… CORS è·¨åŸŸä¿æŠ¤
- âœ… è¯·æ±‚æ—¥å¿—è®°å½•

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### å‰ç«¯å¼€å‘

```bash
cd frontend
npm run dev      # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build    # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run lint     # ESLintæ£€æŸ¥
```

### åç«¯å¼€å‘

```bash
cd backend
npm start        # å¯åŠ¨æœåŠ¡å™¨ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼Œå»ºè®®ä½¿ç”¨ nodemonï¼‰
```

å®‰è£… nodemon ç”¨äºè‡ªåŠ¨é‡å¯ï¼š

```bash
npm install -g nodemon
# ç„¶åè¿è¡Œ
nodemon server.js
```

## ğŸ“ ç¤ºä¾‹ï¼šå®Œæ•´çš„ç”¨æˆ·ä½¿ç”¨æµç¨‹

### 1. ç”¨æˆ·æ³¨å†Œä¸ç™»å½•

```bash
POST /api/auth/register
{
  "username": "zhangsan",
  "password": "password123"
}

POST /api/auth/login
{
  "username": "zhangsan",
  "password": "password123"
}
```

### 2. å®Œæˆå¥åº·æ¡£æ¡ˆ

```bash
PUT /api/health-profile
{
  "height": 175,
  "weight": 75,
  "targetWeight": 70,
  "gender": "male",
  "age": 28,
  "activityLevel": "moderate",
  "goal": "lose_weight"
}
```

### 3. è®°å½•é¥®é£Ÿ

```bash
POST /api/food-logs
{
  "foodId": "507f1f77bcf86cd799439011",
  "quantity": 150,      // 150g
  "mealType": "breakfast"
}
```

### 4. æŸ¥çœ‹ä»Šæ—¥æ•°æ®

```bash
GET /api/nutrition/today
# è¿”å›ä»Šæ—¥çƒ­é‡ã€è›‹ç™½è´¨ã€ç¢³æ°´ã€è„‚è‚ªæ±‡æ€»
```

### 5. è·å– AI è¯„ä¼°

```bash
GET /api/health/assessment
# è¿”å›AIç»™å‡ºçš„å¥åº·è¯„ä¼°å’Œå»ºè®®
```

## ğŸ¨ UI ç‰¹ç‚¹

- ç°ä»£åŒ–æ¸å˜èƒŒæ™¯è®¾è®¡
- å“åº”å¼å¸ƒå±€ï¼ˆæ”¯æŒæ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢ï¼‰
- å®æ—¶æ•°æ®æ›´æ–°
- åŠ¨ç”»åŠ è½½çŠ¶æ€
- å‹å¥½çš„é”™è¯¯æç¤º

## ğŸš§ åç»­åŠŸèƒ½è§„åˆ’

- [ ] ç¤¾äº¤åˆ†äº«åŠŸèƒ½
- [ ] ç¦»çº¿æ¨¡å¼æ”¯æŒ
- [ ] ç§»åŠ¨ App ç‰ˆæœ¬
- [ ] æ›´å¤š AI æ¨¡å‹é›†æˆ
- [ ] æ•°æ®å¯¼å‡ºï¼ˆPDF/Excelï¼‰
- [ ] å®¶åº­æˆå‘˜ç®¡ç†
- [ ] å•†åŸ/è®¢é¤æœåŠ¡é›†æˆ

## ğŸ› æ•…éšœæ’é™¤

### é£Ÿç‰©åº“æ•°æ®æœªåˆå§‹åŒ–

- **ç—‡çŠ¶**ï¼šé¡µé¢æ˜¾ç¤º"æš‚æ— é£Ÿç‰©"
- **è§£å†³**ï¼šæ£€æŸ¥ MongoDB è¿æ¥ï¼Œé‡å¯åç«¯æœåŠ¡

### ç™»å½•åä»æ˜¾ç¤ºç™»å½•é¡µ

- **ç—‡çŠ¶**ï¼šToken ä¿å­˜å¤±è´¥
- **è§£å†³**ï¼šæ£€æŸ¥æµè§ˆå™¨ localStorage æ˜¯å¦è¢«ç¦ç”¨

### AI åŠŸèƒ½è¿”å›é”™è¯¯

- **ç—‡çŠ¶**ï¼šAI è¯„ä¼°/æ¨èå¤±è´¥
- **è§£å†³**ï¼šæ£€æŸ¥`API_KEY`å’Œ`AI_API_BASE_URL`é…ç½®æ˜¯å¦æ­£ç¡®

### MongoDB è¿æ¥å¤±è´¥

- **ç—‡çŠ¶**ï¼šå¯åŠ¨æ—¶æ˜¾ç¤º"âŒ MongoDB è¿æ¥å¤±è´¥"
- **è§£å†³**ï¼šç¡®ä¿ MongoDB æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œ`MONGODB_URI`é…ç½®æ­£ç¡®

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¨â€ğŸ’» ä½œè€…

AI è¥å…»å¸ˆé¡¹ç›®

## ğŸ“§ è”ç³»ä¸åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– PRã€‚

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼å¥åº·é¥®é£Ÿï¼Œä»è®°å½•å¼€å§‹ï¼** ğŸ¥—âœ¨
